"use strict";(self.webpackChunkrouter=self.webpackChunkrouter||[]).push([[117],{237:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var s=n(791),o=n(880),c=n(523),r="HighlightedQuote_quote__A75t1",a=n(184),d=function(e){return(0,a.jsxs)("figure",{className:r,children:[(0,a.jsx)("p",{children:e.text}),(0,a.jsx)("figcaption",{children:e.author})]})},m=n(152),u="Comments_comments__DcKza",l="NewCommentForm_form__B620v",i="NewCommentForm_control__0vSsx",x="NewCommentForm_actions__-MlgQ",h=n(995),f=n(853),j=n(556),_=function(e){var t=(0,h.Z)(f.Ir),n=t.sendRequest,o=t.status,c=t.error,r=(t.data,(0,s.useRef)()),d=e.onAddedComment;(0,s.useEffect)((function(){"completed"!==o||c||d()}),[o,c,d]);var m=function(t){t.preventDefault();var s=r.current.value;n({commentData:{text:s},quotedId:e.quotedId})};return(0,a.jsxs)("form",{className:l,onSubmit:m,children:["pending"===o&&(0,a.jsx)(j.Z,{}),(0,a.jsxs)("div",{className:i,onSubmit:m,children:[(0,a.jsx)("label",{htmlFor:"comment",children:"Your Comment"}),(0,a.jsx)("textarea",{id:"comment",rows:"5",ref:r})]}),(0,a.jsx)("div",{className:x,children:(0,a.jsx)("button",{className:"btn",children:"Add Comment"})})]})},p="CommentItem_item__J1TAI",N=function(e){return(0,a.jsx)("li",{className:p,children:(0,a.jsx)("p",{children:e.text})})},v="CommentsList_comments__TdU2l",C=function(e){return(0,a.jsx)("ul",{className:v,children:e.comment.map((function(e){return(0,a.jsx)(N,{text:e.text},e.id)}))})},q=function(){var e=(0,s.useState)(!1),t=(0,m.Z)(e,2),n=t[0],c=t[1],r=(0,h.Z)(f.h_),d=r.sendRequest,l=r.status,i=r.error,x=r.data,p=(0,o.useParams)().quoteId;(0,s.useEffect)((function(){d(p)}),[p,d]);var N,v=(0,s.useCallback)((function(){d(p)}),[d,p]);return"pending"===l&&(N=(0,a.jsx)("div",{className:"centered",children:(0,a.jsx)(j.Z,{})})),i&&(N=(0,a.jsx)("p",{className:"centered focused",children:i})),"completed"===l&&x&&x.length>0&&(N=(0,a.jsx)(C,{comment:x})),"completed"!==l||x||0!==x.length||(N=(0,a.jsx)("p",{children:"Comment not found maybe add one?"})),(0,a.jsxs)("section",{className:u,children:[(0,a.jsx)("h2",{children:"User Comments"}),!n&&(0,a.jsx)("button",{className:"btn",onClick:function(){c(!0)},children:"Add a Comment"}),n&&(0,a.jsx)(_,{quotedId:p,onAddedComment:v}),N]})},b=function(){var e=(0,o.useRouteMatch)(),t=(0,o.useParams)(),n=t.quoteId,r=(0,h.Z)(f.jR,!0),m=r.sendRequest,u=r.status,l=r.error,i=r.data;return(0,s.useEffect)((function(){m(n)}),[m,n]),console.log(n),"pending"===u?(0,a.jsx)("div",{className:"centered",children:(0,a.jsx)(j.Z,{})}):l?(0,a.jsx)("p",{className:"centered focused",children:l}):i.text?(console.log(t),(0,a.jsxs)("div",{children:[(0,a.jsx)(d,{text:i.text,author:i.author}),(0,a.jsx)(o.Route,{path:"".concat(e.path),exact:!0,children:(0,a.jsx)("div",{className:"centered",children:(0,a.jsx)(c.rU,{className:"btn--flat",to:"/quotes/".concat(t.quoteId,"/comments"),children:"Load comments"})})}),(0,a.jsx)(o.Route,{path:"/quotes/".concat(t.quoteId,"/comments"),children:(0,a.jsx)(q,{})})]})):(0,a.jsx)("p",{children:"No quote found"})}}}]);
//# sourceMappingURL=117.67870087.chunk.js.map